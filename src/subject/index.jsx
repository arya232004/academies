import React, { useEffect } from "react";
import { useParams } from "react-router-dom";
import Nav from "../home/nav";
import { useAuth } from "../auth/authcontext";
import { getpdf } from "../home/functions";

export default function Subject() {
  const { user } = useAuth();
  const [pdfs, setPdfs] = React.useState([]);
  const { subjectname } = useParams(); // Access the route parameter 'subjectname'

  useEffect(() => {
    if (user) {
      console.log(user.email, subjectname);
      getpdf(user.email, subjectname).then((data) => {
        console.log(data);
        setPdfs(data);
      });
    }
  }, [user, subjectname]);

  function givetitle(url) {
    const parts = url.split("/");
    const lastPart = parts[parts.length - 1];
    const decodedName = decodeURIComponent(lastPart);
    const fileNameWithoutExtension = decodedName.split("?")[0].split("/")[2];
    console.log(fileNameWithoutExtension);
    return fileNameWithoutExtension;
}


  return (
    <div>
      <Nav user={user} />
      {pdfs.map((pdf, key) => (
        <div className="note" key={key} style={{display:'inline-block',maxWidth:'100%'}}>
          <p style={{marginLeft:'10px'}}>{givetitle(pdf)}</p>
          <img
          alt="pdf icon"
            style={{ width: "50px", height: "70px" , paddingBottom:'70px',position:'absolute',left:'80%',top:'30%'}}
            onClick={() => {
              window.open(pdf, "_blank");
            }}
            src='data:image/jpeg;base64,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'
          />
        </div>
      ))}
    </div>
  );
}
